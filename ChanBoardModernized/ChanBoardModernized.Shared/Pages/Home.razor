@page "/"
@using ChanBoardModernized.Shared.Components.Interfaces
@using ChanBoardModernized.Shared.Services
@inject IFormFactor FormFactor

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app running on <em>@factor</em> using <em>@platform</em>.

@if (!authState.IsAuthenticated)
{
    <p>Please log in to access the application.</p>
}
else
{
    <p>Welcome back! @authState.UserDto.Username</p>
    @* <p>Your email: @authState.UserDto.Email</p> *@
    <p>Your role: @authState.UserDto.Role</p>
}

@code {
    [Inject]
    private IAuthState authState { get; set; } = null!;
    private string factor => FormFactor.GetFormFactor();
    private string platform => FormFactor.GetPlatform();

    protected override async Task OnInitializedAsync()
    {
        await authState.LoadAsync();
        await base.OnInitializedAsync();
    }
}
